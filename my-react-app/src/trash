import React, { useState } from 'react';
import 'bootstrap/dist/css/bootstrap.min.css';
import './Style.css'
import { NavLink, Navigate, useNavigate } from 'react-router-dom';
import { createUserWithEmailAndPassword, getIdToken, sendEmailVerification } from 'firebase/auth'
import { auth } from './firebase';
import axios from 'axios';

const UserRegistrationForm = () => {

  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [password1, setPassword1] = useState('');
  const [password, setPassword] = useState('');
  const [firstname, setFirstname] = useState('');
  const [lastname, setLastname] = useState('');
  const [phonenumber, setPhonenumber] = useState('');
  const [required, setRequired] = useState(false)
  const [match, setMatch] = useState(false)
  const [passwordLength, setPasswordLength] = useState(false);
  const [emailInUse, setEmailInUse] = useState(false)
  const [networkError, setNetworkError] = useState(false)

  const onSubmit = async (e) => {
  e.preventDefault();
   if (!email || !password || !password1 || !firstname || !lastname || !phonenumber) {
    setRequired(true)
    setMatch(false)
    setPasswordLength(false)
    setEmailInUse(false)
    setNetworkError(false)
    console.log('All fields are required')
    return;
   }
   if (password1 !== password) {
    setMatch(true);
    setRequired(false)
    setPasswordLength(false)
    setEmailInUse(false)
    setNetworkError(false)
    console.log('password must match'); 
    return
    }

    if (password1 === password) {
        setPasswordLength(false)
        setEmailInUse(false)
        setNetworkError(false)
    }

    if (password.length < 6) {
        setPasswordLength(true)
        setMatch(false)
        setRequired(false)
        setEmailInUse(false)
        setNetworkError(false)
        console.log('not enough chararacters.')
        return
    }

   try {
      const userCredentials = await createUserWithEmailAndPassword(auth, email, password)
      
      await sendEmailVerification(userCredentials.user)
      const user = userCredentials.user
      const idToken = await getIdToken(user)
      localStorage.setItem('token', idToken)

      const params = {
        firstname: firstname,
        lastname: lastname,
        email: email,
        phonenumber: phonenumber,
      }

      const options = {headers: {Authorization: `Bearer ${idToken}`, 'Content-Type': 'application/json'}}
      const store = await axios.post('http://localhost:5000/create_user', params, options)
      console.log(store.status)


      setPasswordLength(false)
      setMatch(false)
      setRequired(false)
      setEmailInUse(false)
      setNetworkError(false)
     
      
      return navigate("/confirmation")

    } catch (err) {
      console.log(err.code)
      if (err.code === 'auth/email-already-in-use') {
        setEmailInUse(true)
        setPasswordLength(false)
        setMatch(false)
        setRequired(false)
        setNetworkError(false)
      }
      if (err.code == 'auth/network-request-failed') {
        setNetworkError(true)
        setEmailInUse(false)
        setPasswordLength(false)
        setMatch(false)
        setRequired(false)
      }
       return;
      }

      
  }

    return (
        <div className="container">
            <h1>Registration Form</h1>
            <form>
                {networkError && <h5>please check you network connection</h5>}
                {emailInUse && <h5>This email is already in use.</h5>}
                {required && <h5>All fields are required.</h5>}
                {match && <h5>Ooops.. Passwords don't match.</h5>}
                <div className="form-group row first-field">
                    <label htmlFor="firstname" className="col-sm-2 col-form-label">First Name:</label>
                    <div className="col-sm-10">
                        <input type="text" className="form-control" id="firstname" value={firstname} name="firstname" placeholder='John' onChange={(e) => setFirstname(e.target.value)} required />
                    </div>
                </div>

                <div className="form-group row">
                    <label htmlFor="lastname" className="col-sm-2 col-form-label">Last Name:</label>
                    <div className="col-sm-10">
                        <input type="text" className="form-control" id="lastname" value={lastname} name="lastname" placeholder='Doe' onChange={(e) => setLastname(e.target.value)} required />
                    </div>
                </div>

                
                <div className="form-group row">
                    <label htmlFor="email" className="col-sm-2 col-form-label">Email:</label>
                    <div className="col-sm-10">
                        <input type="email" value={email} className="form-control" id="email" name="email" placeholder='johndoe@gmail.com' onChange={(e) => setEmail(e.target.value)} required />
                    </div>
                </div>

                <div className="form-group row">
                    <label htmlFor="phonenumber" className="col-sm-2 col-form-label">Phone Number:</label>
                    <div className="col-sm-10">
                        <input type="text" className="form-control" id="phonenumber" name="phonenumber" value={phonenumber} placeholder='+254 700000000' onChange={(e) => setPhonenumber(e.target.value)} required/>
                    </div>
                </div>
                <div className="form-group row">
                    <label htmlFor="password1" className="col-sm-2 col-form-label">Password:</label>
                    {passwordLength && <h6 style={{color: 'red'}}>must be 6 or more characters</h6>}
                    {!passwordLength && <h6>must be 6 or more characters</h6>}
                    <div className="col-sm-10">
                        <input type="password" className="form-control" id="password1" name="password1" placeholder='enter your password' value={password1} onChange={(e) => setPassword1(e.target.value)} required />
                    </div>
                </div>

                <div className="form-group row">
                    <label htmlFor="password" className="col-sm-2 col-form-label">Confirm password:</label>
                    {passwordLength && <h6 style={{color: 'red'}}>must be 6 or more characters</h6>}
                    {!passwordLength && <h6>must be 6 or more characters</h6>}
                    <div className="col-sm-10">
                        <input type="password" value={password} className="form-control" id="password" name="password" placeholder='confirm password'  onChange={(e) => setPassword(e.target.value)}required />
                    </div>
                </div>


                <div className="row">
                    <div className="">
                    <div className="">
                        <button type="submit" className="btn btn-primary btn-lg" onClick={ onSubmit }>Register</button>
                        <p>
                        Do have an account?{' '}
                        <NavLink to='/login'>
                        login{' '}
                        </NavLink>
                        </p>
                    </div>
                    {networkError && <h5>please check you network connection</h5>}
                    {emailInUse && <h5>This email is already in use.</h5>}
                    {required && <h5>All fields are required.</h5>}
                    {match && <h5>Ooops.. Passwords don't match.</h5>}

                    </div>
                    
                </div>
            </form>
        </div>
    );
};

export default UserRegistrationForm;







import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { NavLink } from 'react-router-dom';
import Logout from './Logout';

const ProjectsPage = () => {
  const [balance, setBalance] = useState(null);
  const [userTransactions, setUserTransactions] = useState(null);
  const [projects, setProjects] = useState([
    {
      title: "Community Development",
      description: "Supporting initiatives aimed at improving infrastructure, education, and healthcare in African communities.",
      targetCommunities: 20,
      fundraisingGoal: 50000,
      currentAmount: 0
    },
    {
      title: "Clean Water Initiative",
      description: "Funding water sanitation and hygiene projects to provide access to clean and safe drinking water.",
      targetCommunities: 30,
      fundraisingGoal: 70000,
      currentAmount: 0
    },
    {
      title: "Environmental Conservation",
      description: "Preserving Africa's natural habitats and promoting sustainable practices for future generations.",
      targetCommunities: 15,
      fundraisingGoal: 40000,
      currentAmount: 0
    },
    {
      title: "Education Empowerment",
      description: "Investing in education programs to empower youth and adults with knowledge and skills for a brighter future.",
      targetCommunities: 25,
      fundraisingGoal: 60000,
      currentAmount: 0
    }
  ]);

  useEffect(() => {
    async function loadData() {
      const token = localStorage.getItem('token');
      const options = { headers: { Authorization: `Bearer ${token}` } };

      try {
        const balanceResponse = await axios.get('http://localhost:5000/balance', options);
        if (balanceResponse.status === 200) {
          const data = balanceResponse.data.message.data[0];
          setBalance(data.balance / 100);
        }

        const transactions
  )};
    
  <!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Donate - HopeFusion Africa</title>
  <!-- Include your meta tags, favicons, and CSS files here -->
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- Include your header with navigation here -->

  <!-- ======= Donate Section ======= -->
  <section class="section">
    <div class="container">
      <div class="row justify-content-center text-center mb-5">
        <div class="col-md-8" data-aos="fade-up">
          <h2 class="section-heading">Donate to HopeFusion Africa</h2>
          <p>Your donation will make a difference in the lives of African communities. Support us in creating a better future for all.</p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4" data-aos="fade-up">
          <div class="card bg-primary text-white">
            <style>
              .card-body {
                text-align: center;
                padding: 20px;
                width: 100%;
                display: flex;
              }
              
              .card-title {
                color: #333;
                font-size: 24px;
                margin-bottom: 10px;
              }
              
              .card-text {
                color: #666;
                font-size: 16px;
                margin-bottom: 20px;
              }
              
              .payment-method {
                margin-bottom: 20px;
              }
              
              .payment-logo {
                width: 150px;
                height: auto;
                margin-bottom: 10px;
              }
              
              .payment-details {
                color: #888;
                font-size: 14px;
              }
              
              .payment-details a {
                color: #007bff;
                text-decoration: none;
              }
            </style>
            <div class="card-body">
              <h3 class="card-title">Cash Donation</h3>
              <p class="card-text">Contribute directly with cash donations to support our projects.</p>
              
              <h5>Payment Methods:</h5>
              
              <!-- PayPal -->
              <div class="payment-method">
                <a href="https://www.paypal.com"><img src="paypal_logo.png" alt="PayPal Logo" class="payment-logo"></a>
                <p class="payment-details">Donate securely via PayPal. <a href="https://www.paypal.com">Donate Now</a></p>
              </div>
              
              <!-- Credit Card -->
              <div class="payment-method">
                <a href="https://www.example.com/creditcard"><img src="creditcard_logo.png" alt="Credit Card Logo" class="payment-logo"></a>
                <p class="payment-details">Make a donation using your credit card. <a href="https://www.example.com/creditcard">Donate Now</a></p>
              </div>
              
              <!-- Bank Transfer -->
              <div class="payment-method">
                <a href="https://www.examplebank.com"><img src="banktransfer_logo.png" alt="Bank Transfer Logo" class="payment-logo"></a>
                <p class="payment-details">Transfer funds directly to our bank account. <a href="https://www.examplebank.com">Donate Now</a></p>
              </div>
            </div>
            
        </div>
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
          <div class="card bg-success text-white">
            <div class="card-body">
              <h3 class="card-title">Cheque Donation</h3>
              <p class="card-text">Make donations through cheque payable to HopeFusion Africa.</p>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
          <div class="card bg-info text-white">
            <div class="card-body">
              <h3 class="card-title">Gift Donation</h3>
              <p class="card-text">Donate gifts such as clothing, food, or educational materials.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
          <div class="card bg-warning text-white">
            <div class="card-body">
              <h3 class="card-title">Stock Matching</h3>
              <p class="card-text">Participate in stock matching programs to double your donation impact.</p>
            </div>
          </div>
        </div>
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
          <div class="card bg-info text-white">
            <div class="card-body">
              <h3 class="card-title">Celebration Donations</h3>
              <p class="card-text">Make donations to celebrate special occasions like birthdays or anniversaries.</p>
            </div>
          </div>
        </div>
        <!-- Add more donation methods as needed -->
      </div>
    </div>
  </section>
  

  <!-- Include your footer here -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
          <h3>About Africa Donation Project</h3>
          <p>Our mission is to support sustainable development and improve the quality of life for people in Africa through various initiatives and projects.</p>
          <p class="social">
            <a href="#">HopeFusion<span class="bi bi-twitter"></span></a>
            <a href="#">HopeFusion<span class="bi bi-facebook"></span></a>
            <a href="#">HopeFusion<span class="bi bi-instagram"></span></a>
            <a href="#">HopeFusion<span class="bi bi-linkedin"></span></a>
          </p>
        </div>
        <div class="col-md-7 ms-auto">
          <div class="row site-section pt-0">
            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Navigation</h3>
              <ul class="list-unstyled">
                <li><a href="#">About Us</a></li>
                <li><a href="#">Projects</a></li>
                <li><a href="#">Donate</a></li>
                <li><a href="#">Contact Us</a></li>
              </ul>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Services</h3>
              <ul class="list-unstyled">
                <li><a href="#">FAQs</a></li>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms of Service</a></li>
              </ul>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Get Involved</h3>
              <ul class="list-unstyled">
                <li><a href="#">Volunteer</a></li>
                <li><a href="#">Partnerships</a></li>
                <li><a href="#">Donate</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row justify-content-center text-center">
        <div class="col-md-7">
          <p class="copyright">&copy; Copyright 2024 Africa Donation Project. All Rights Reserved</p>
          <div class="credits">
            Designed by <a href="#">HopeFusion Africa</a>
          </div>
        </div>
      </div>

    </div>
  </footer>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>


<div class="col-lg-4 iphone-wrap">
              <img src="assets/img/phone_6.jpg" alt="Image" class="phone-1" data-aos="fade-right">
              <img src="assets/img/phone_4.jpg" alt="Image" class="phone-2" data-aos="fade-right" data-aos-delay="200">
            </div>
